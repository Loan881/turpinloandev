<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Panier</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --bg-alt:#f7f7f7;
      --text:#111111;
      --muted:#2d2d2d;
      --border:#000000;
      --accent:#1E155C;
      --accent-2:#181451;
    }

    *{box-sizing:border-box}
    html,body{height:100%; overflow-x:hidden}
    body{
      margin:0; font-family:"Playfair Display", serif;
      color:var(--text); background:var(--bg); line-height:1.55;
    }
    img{max-width:100%; height:auto; display:block}
    a{color:inherit; text-decoration:none}
    .container{width:min(1200px, 92%); margin-inline:auto}

    /* Topbar (identique style TAOG) */
    header{
      background:var(--bg);
      position:sticky; top:0; z-index:40;
      border-bottom:1px solid rgba(0,0,0,.05);
      backdrop-filter:saturate(160%) blur(6px);
    }
    .topbar{position:relative; display:flex; align-items:center; justify-content:center; gap:12px; padding:12px 0; min-height:60px}
    .back{position:absolute; left:0; top:50%; transform:translateY(-50%)}
    .back a{display:inline-flex; align-items:center; justify-content:center; padding:12px; border:none; background:transparent; border-radius:8px; line-height:0; cursor:pointer}
    .back a:hover{opacity:.85}
    .back a svg{width:28px; height:28px; fill:currentColor}
    .title{position:absolute; left:50%; transform:translateX(-50%); margin:0; font-weight:700; font-size:22px; letter-spacing:.3px; white-space:nowrap; text-align:center}

    /* Badge panier (optionnel sur cette page) */
    .cart{position:absolute; right:0; top:50%; transform:translateY(-50%)}
    .cart a{display:inline-flex; align-items:center; justify-content:center; padding:12px; border-radius:10px; border:1px solid rgba(0,0,0,.08)}
    .cart svg{width:24px; height:24px}
    .badge{ margin-left:8px; min-width:18px; height:18px; padding:0 6px; border-radius:9px; background:#000; color:#fff; font-size:11px; line-height:18px; text-align:center; font-weight:900; display:none }

    /* Sections / titres */
    section{padding:32px 0}
    .h2{font-weight:700}
    .rule{width:225px; height:1px; background:#000; margin:8px 0 18px}
    .muted{color:var(--muted)}

    /* Layout panier */
    .grid{
      display:grid;
      grid-template-columns: 1fr minmax(260px, 360px);
      gap: clamp(16px, 3.5vw, 28px);
      align-items:start;
    }
    @media (max-width: 880px){
      .grid{ grid-template-columns: 1fr; }
    }

    /* Liste d'articles */
    .list{display:grid; gap:12px}
    .row{
      display:grid; grid-template-columns: auto 1fr auto; gap:12px;
      align-items:center;
      background:var(--bg);
      border:1px solid rgba(0,0,0,.08);
      border-radius:12px; padding:10px;
    }
    .thumb{width:92px; height:92px; border-radius:10px; overflow:hidden; background:#f4f4f6; border:1px solid rgba(0,0,0,.06)}
    .thumb img{width:100%; height:100%; object-fit:cover}

    .meta{display:grid; gap:6px}
    .name{font-weight:700}
    .opt{font-size:.95rem; color:var(--muted)}

    .act{display:grid; gap:8px; justify-items:end}
    .qty{
      display:inline-grid; grid-auto-flow:column; gap:8px; align-items:center;
      border:1px solid rgba(0,0,0,.12); border-radius:999px; padding:4px 8px;
    }
    .qty button{
      width:28px; height:28px; border-radius:50%; border:1px solid rgba(0,0,0,.12);
      background:#fff; cursor:pointer;
    }
    .price{font-weight:800}
    .rm{background:transparent; border:none; color:#999; cursor:pointer; font-size:14px; text-decoration:underline}

    /* Résumé */
    .summary{
      position:sticky; top:84px;
      background:var(--bg);
      border:1px solid rgba(0,0,0,.08);
      border-radius:12px;
      padding:14px 16px;
      display:grid; gap:10px;
    }
    .rowline{display:flex; justify-content:space-between; gap:12px}
    .total{font-weight:800; font-size: clamp(1.05rem, 1vw + 1rem, 1.25rem)}
    .buttons{display:grid; gap:10px; margin-top:6px}
    .button{
      display:inline-block; background:var(--accent); color:#fff;
      border:1px solid #000; padding:12px 16px; border-radius:10px; font-size:14px; text-align:center; cursor:pointer
    }
    .ghost{
      display:inline-block; background:#fff; color:#111;
      border:1px solid rgba(0,0,0,.12); padding:12px 16px; border-radius:10px; font-size:14px; text-align:center; cursor:pointer
    }

    /* Vide */
    .empty{
      text-align:center;
      border:1px dashed rgba(0,0,0,.18);
      border-radius:12px;
      padding:28px;
    }

    /* Footer (identique TAOG) */
    .site-footer{ padding: 20px; background:#fff }
    .site-footer .divider{ background:#000; opacity:.4 }
    .footer-top{ display:flex; gap:20px; justify-content:space-around; align-items:flex-start; padding: 10px 0 20px }
    .footer-title{ font-weight: 700; font-size: 18px; margin: 6px 0 }
    .footer-links{ display:grid; gap:12px; margin-top:14px }
    .footer-contact{ width:min(800px, 100%); margin: 0 auto; text-align:center; padding: 0 20px 20px }
    .footer-contact .line{ font-size: 16px; display:flex; gap:8px; justify-content:center }
    .credit{ width:220px; margin: 20px auto 0 }

    @media (max-width: 768px){
      .title{font-size:18px}
    }
  </style>
</head>
<body>

  <!-- Top Bar -->
  <header>
    <div class="container topbar">
      <div class="back">
        <a href="produits.html" aria-label="Retour" title="Retour">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </a>
      </div>
      <h1 class="title">Panier</h1>
      <div class="cart">
        <a href="panier.html" aria-label="Panier">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 6h14l-1.6 9.5H9.2L7 6zm0 0L5.5 3H3"/><circle cx="10" cy="21" r="1.5"/><circle cx="18" cy="21" r="1.5"/></svg>
          <span id="cartBadge" class="badge">0</span>
        </a>
      </div>
    </div>
  </header>

  <!-- Contenu -->
  <section>
    <div class="container">
      <div class="grid">
        <!-- Liste articles -->
        <div>
          <h2 class="h2">Vos articles</h2>
          <div class="rule"></div>

          <div id="empty" class="empty" style="display:none">
            Votre panier est vide. <a class="button" href="produits.html" style="margin-left:10px">Découvrir les produits</a>
          </div>

          <div id="list" class="list" aria-live="polite"></div>
        </div>

        <!-- Résumé -->
        <aside class="summary" aria-label="Récapitulatif">
          <div class="rowline"><span>Sous-total</span><strong id="subtotal">0 €</strong></div>
          <div class="rowline muted"><span>Frais de port</span><span>Calculés au paiement</span></div>
          <div class="rowline total"><span>Total</span><span id="total">0 €</span></div>

          <div class="buttons">
            <button id="clear" class="ghost" type="button">Vider le panier</button>
            <a class="button" href="checkout.html">Aller au paiement</a>
          </div>

          <p class="muted" style="font-size:.95rem; margin:8px 0 0">
            Taxes incluses. Les frais de port sont ajoutés sur la page de paiement.
          </p>
        </aside>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contact" class="site-footer" role="contentinfo">
    <hr class="divider" aria-hidden="true">
    <div class="footer-top">
      <div class="col">
        <h5 class="footer-title">Page</h5>
        <hr class="divider w30" aria-hidden="true">
        <nav class="footer-links" aria-label="Footer navigation">
          <a href="https://loan881.github.io/loanturpin/" class="nav-link">Home</a>
          <a href="https://loan881.github.io/loanturpin/gallery" class="nav-link">Gallery</a>
          <a href="https://loan881.github.io/loanturpin/theartstory" class="nav-link">The Art Story</a>
          <a href="https://loan881.github.io/loanturpin/contactme" class="nav-link">Contact Me.</a>
        </nav>
      </div>
      <div class="col">
        <h5 class="footer-title">Social Media</h5>
        <hr class="divider w82" aria-hidden="true">
        <div class="social-lines">
          <div class="line"><span>Instagram :</span> <a href="https://instagram.com/turpinloanart" target="_blank" rel="noopener noreferrer">turpinloanart</a></div>
          <div class="line"><span>TikTok :</span> <a href="https://tiktok.com/@turpinloanart" target="_blank" rel="noopener noreferrer">turpinloanart</a></div>
        </div>
      </div>
    </div>

    <div class="footer-contact">
      <h5 class="footer-title">Contact Me</h5>
      <hr class="divider" aria-hidden="true">
      <p class="line"><span>E-Mail :</span> <a href="mailto:t.loan.contact@gmail.com">t.loan.contact@gmail.com</a></p>
      <div class="credit">
        <hr class="divider thin" aria-hidden="true">
        <p>© 2025 TURPIN Loan</p>
      </div>
    </div>
  </footer>

  <script>
    /* ===== Utils & Panier ===== */
    const € = v => new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR'}).format((v||0)/100);
    const el = id => document.getElementById(id);

    const CART_KEY = 'cart';
    const loadCart = ()=>{ try{ return JSON.parse(localStorage.getItem(CART_KEY)||'[]'); }catch{ return []; } };
    const saveCart = c => localStorage.setItem(CART_KEY, JSON.stringify(c));
    const cartCount = ()=> loadCart().reduce((n,l)=> n + Math.max(1, parseInt(l.qty||1,10)), 0);
    function updateBadge(){
      const n = cartCount(), b = el('cartBadge');
      if(n>0){ b.textContent=n; b.style.display='inline-block'; } else { b.style.display='none'; }
    }

    function computeSubtotal(lines){ return lines.reduce((s,l)=> s + (l.price*l.qty), 0); }

    function render(){
      const list = el('list');
      const empty = el('empty');
      list.innerHTML = '';

      const cart = loadCart();
      if(!cart.length){
        empty.style.display = 'block';
        el('subtotal').textContent = '0 €';
        el('total').textContent = '0 €';
        return;
      }
      empty.style.display = 'none';

      cart.forEach((l, i) => {
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `
          <div class="thumb"><img src="${l.image || 'https://picsum.photos/seed/placeholder/300/300'}" alt=""></div>
          <div class="meta">
            <div class="name">${l.name || l.id}</div>
            ${l.option ? `<div class="opt">Variante : ${l.option}</div>` : ''}
            <button class="rm" data-i="${i}" aria-label="Retirer">Retirer</button>
          </div>
          <div class="act">
            <div class="qty">
              <button class="dec" data-i="${i}" aria-label="Diminuer">−</button>
              <span>${l.qty || 1}</span>
              <button class="inc" data-i="${i}" aria-label="Augmenter">+</button>
            </div>
            <div class="price">${€((l.price||0) * (l.qty||1))}</div>
          </div>
        `;
        list.appendChild(row);
      });

      const subtotal = computeSubtotal(cart);
      el('subtotal').textContent = €(subtotal);
      el('total').textContent    = €(subtotal);

      // Delegation actions
      list.onclick = (e)=>{
        const inc = e.target.closest('.inc');
        const dec = e.target.closest('.dec');
        const rm  = e.target.closest('.rm');
        const c = loadCart();
        if(inc){ c[+inc.dataset.i].qty = (c[+inc.dataset.i].qty||1) + 1; saveCart(c); updateBadge(); render(); }
        if(dec){ c[+dec.dataset.i].qty = Math.max(1, (c[+dec.dataset.i].qty||1)-1); saveCart(c); updateBadge(); render(); }
        if(rm){  c.splice(+rm.dataset.i,1); saveCart(c); updateBadge(); render(); }
      };
    }

    // Vider
    el('clear').onclick = ()=>{ localStorage.setItem(CART_KEY, '[]'); updateBadge(); render(); };

    // Init
    (function(){
      updateBadge();
      render();
    })();
  </script>
</body>
</html>

